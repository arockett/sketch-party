/*! sketch-party 2016-04-22 */
var drawingApp=function(){"use strict";var a,b,c=490,d=220,e="#cb3594",f="#659b41",g="#ffcf33",h="#986928",i=new Image,j=new Image,k=new Image,l=new Image,m=new Image,n=new Image,o=new Image,p=new Image,q=[],r=[],s=[],t=[],u=[],v=[],w=!1,x=e,y="crayon",z="normal",A=18,B=19,C=93,D=46,E=111,F=11,G=267,H=200,I=23,J=38,K=157,L=36,M=8,N=0,O={huge:39,large:25,normal:18,small:16},P=function(){b.clearRect(0,0,c,d)},Q=function(){var a,w,A,B,I,J=function(a,c,d,e){b.beginPath(),b.moveTo(a+41,c+11),b.lineTo(a+41,c+35),b.lineTo(a+29,c+35),b.lineTo(a+29,c+33),b.lineTo(a+11,c+27),b.lineTo(a+11,c+19),b.lineTo(a+29,c+13),b.lineTo(a+29,c+11),b.lineTo(a+41,c+11),b.closePath(),b.fillStyle=d,b.fill(),e?b.drawImage(j,a,c,C,D):b.drawImage(j,0,0,59,D,a,c,59,D)},K=function(a,c,d,e){b.beginPath(),b.moveTo(a+10,c+24),b.lineTo(a+10,c+24),b.lineTo(a+22,c+16),b.lineTo(a+22,c+31),b.closePath(),b.fillStyle=d,b.fill(),e?b.drawImage(k,a,c,C,D):b.drawImage(k,0,0,59,D,a,c,59,D)};if(!(M>N)){switch(P(),"crayon"===y?(b.drawImage(m,0,0,c,d),I=x===e,a=I?18:52,w=19,J(a,w,e,I),I=x===f,a=I?18:52,w+=46,J(a,w,f,I),I=x===g,a=I?18:52,w+=46,J(a,w,g,I),I=x===h,a=I?18:52,w+=46,J(a,w,h,I)):"marker"===y?(b.drawImage(n,0,0,c,d),I=x===e,a=I?18:52,w=19,K(a,w,e,I),I=x===f,a=I?18:52,w+=46,K(a,w,f,I),I=x===g,a=I?18:52,w+=46,K(a,w,g,I),I=x===h,a=I?18:52,w+=46,K(a,w,h,I)):"eraser"===y&&(b.drawImage(o,0,0,c,d),b.drawImage(l,18,19,C,D)),z){case"small":a=467;break;case"normal":a=450;break;case"large":a=428;break;case"huge":a=399}for(w=189,b.beginPath(),b.rect(a,w,2,12),b.closePath(),b.fillStyle="#333333",b.fill(),b.save(),b.beginPath(),b.rect(E,F,G,H),b.clip(),B=0;B<q.length;B+=1){switch(u[B]){case"small":A=2;break;case"normal":A=5;break;case"large":A=10;break;case"huge":A=20}b.beginPath(),v[B]&&B?b.moveTo(q[B-1],r[B-1]):b.moveTo(q[B]-1,r[B]),b.lineTo(q[B],r[B]),"eraser"===t[B]?b.strokeStyle="white":b.strokeStyle=s[B],b.lineCap="round",b.lineJoin="round",b.lineWidth=A,b.stroke()}b.closePath(),b.restore(),"crayon"===y&&(b.globalAlpha=.4,b.drawImage(p,0,0,c,d)),b.globalAlpha=1,b.drawImage(i,E,F,G,H)}},R=function(a,b,c){q.push(a),r.push(b),t.push(y),s.push(x),u.push(z),v.push(c)},S=function(){var b=function(a){var b,c=a.pageX-this.offsetLeft,d=a.pageY-this.offsetTop;E>c?c>A&&(d>B&&B+D>d?x=e:d>B+D&&B+2*D>d?x=f:d>B+2*D&&B+3*D>d?x=g:d>B+3*D&&B+4*D>d&&(x=h)):c>E+G&&d>I&&(d>K?(b=E+G,K+L>d&&c>b&&(c<b+O.huge?z="huge":c<b+O.large+O.huge?z="large":c<b+O.normal+O.large+O.huge?z="normal":c<b+O.small+O.normal+O.large+O.huge&&(z="small"))):I+J>d?y="crayon":I+2*J>d?y="marker":I+3*J>d&&(y="eraser")),w=!0,R(c,d,!1),Q()},c=function(a){w&&(R(a.pageX-this.offsetLeft,a.pageY-this.offsetTop,!0),Q()),a.preventDefault()},d=function(){w=!1,Q()},i=function(){w=!1};a.addEventListener("mousedown",b,!1),a.addEventListener("mousemove",c,!1),a.addEventListener("mouseup",d),a.addEventListener("mouseout",i,!1),a.addEventListener("touchstart",b,!1),a.addEventListener("touchmove",c,!1),a.addEventListener("touchend",d,!1),a.addEventListener("touchcancel",i,!1)},T=function(){N+=1,N===M&&(Q(),S())},U=function(){a=document.createElement("canvas"),a.setAttribute("width",c),a.setAttribute("height",d),a.setAttribute("id","canvas"),document.getElementById("canvasDiv").appendChild(a),"undefined"!=typeof G_vmlCanvasManager&&(a=G_vmlCanvasManager.initElement(a)),b=a.getContext("2d"),j.onload=T,j.src="images/crayon-outline.png",k.onload=T,k.src="images/marker-outline.png",l.onload=T,l.src="images/eraser-outline.png",m.onload=T,m.src="images/crayon-background.png",n.onload=T,n.src="images/marker-background.png",o.onload=T,o.src="images/eraser-background.png",p.onload=T,p.src="images/crayon-texture.png",i.onload=T,i.src="images/watermelon-duck-outline.png"};return{init:U}}();